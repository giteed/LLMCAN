
# NeuralChat: Децентрализованный чат с поддержкой ИИ

**NeuralChat** — это часть проекта **LLMCAN**, представляющая собой децентрализованный чат, где пользователи могут общаться между собой и взаимодействовать с ИИ-моделями (например, LLaMA). Чат поддерживает несколько протоколов связи (MQTT, WebSocket) и обеспечивает безопасность и удобство для пользователей.

---

## **Возможности чата**

1. **Децентрализованная архитектура**:
   - Использование MQTT с несколькими брокерами для обеспечения отказоустойчивости и масштабируемости.
   - Возможность подключения к нескольким серверам одновременно.

2. **Реальное время**:
   - Поддержка WebSocket для мгновенного обмена сообщениями.

3. **Интеграция с ИИ**:
   - Возможность вызывать LLaMA-модель по имени (например, "Ольга").
   - Обработка запросов к модели в реальном времени.

4. **Безопасность**:
   - Аутентификация и авторизация пользователей.
   - Шифрование сообщений (end-to-end или через TLS).

5. **История сообщений**:
   - Сохранение и загрузка истории чата из базы данных.

6. **Команды и упоминания**:
   - Поддержка команд (например, `/help`, `/clear`).
   - Упоминания пользователей (`@username`).

7. **Логирование**:
   - Логирование всех действий для отслеживания активности и устранения проблем.

---

## **Как работает чат**

1. **Подключение**:
   - Пользователи подключаются к чату через MQTT или WebSocket.
   - Происходит аутентификация (регистрация/вход).

2. **Обмен сообщениями**:
   - Сообщения передаются через MQTT или WebSocket.
   - Сообщения сохраняются в базе данных для истории.

3. **Взаимодействие с ИИ**:
   - Пользователь может обратиться к ИИ-модели, указав ее имя (например, "Ольга, расскажи шутку").
   - Запрос отправляется в LLaMA-модель, и ответ возвращается в чат.

4. **Децентрализация**:
   - Сообщения синхронизируются между несколькими MQTT-брокерами.
   - Пользователи могут подключаться к любому доступному брокеру.

---

## **Структура папок**

```
LLMCAN/
├── agents/
│   └── NeuralChat/
│       ├── __init__.py
│       ├── modules/                  # Модули для чата
│       │   ├── __init__.py
│       │   ├── mqtt_handler.py       # Обработка MQTT
│       │   ├── websocket_handler.py  # Обработка WebSocket
│       │   ├── auth.py               # Аутентификация и авторизация
│       │   ├── db.py                 # Работа с базой данных
│       │   ├── llama_integration.py  # Интеграция LLaMA-модели
│       │   ├── encryption.py         # Шифрование сообщений
│       │   ├── commands.py           # Обработка команд
│       │   └── logging.py            # Логирование
│       ├── server/                   # Серверная часть
│       │   ├── __init__.py
│       │   └── main.py               # Основной скрипт сервера
│       ├── client/                   # Клиентская часть
│       │   ├── __init__.py
│       │   └── main.py               # Основной скрипт клиента
│       ├── config/                   # Конфигурация
│       │   ├── __init__.py
│       │   └── settings.py           # Настройки чата
│       ├── tests/                    # Тесты
│       │   ├── __init__.py
│       │   ├── test_logging.py       # Тест логирования
│       │   ├── test_mqtt.py
│       │   ├── test_websocket.py
│       │   └── test_llama.py
│       ├── requirements.txt          # Зависимости
│       └── DEVELOPMENT_PLAN.md       # План разработки
├── core/
├── data/
├── history/
├── logs/
├── settings.py
└── ...
```

---

## **План разработки**

1. **Базовые компоненты**:
   - Реализация MQTT и WebSocket серверов.
   - Настройка децентрализованной архитектуры (несколько MQTT-брокеров).

2. **Аутентификация и безопасность**:
   - Добавление регистрации и входа.
   - Шифрование сообщений.

3. **Интеграция с ИИ**:
   - Подключение LLaMA-модели через API.
   - Обработка запросов к модели.

4. **История сообщений**:
   - Сохранение и загрузка сообщений из базы данных.

5. **Команды и упоминания**:
   - Добавление команд (например, `/help`, `/clear`).
   - Реализация упоминаний пользователей (`@username`).

6. **Логирование**:
   - Настройка логирования для отслеживания активности.

7. **Тестирование**:
   - Написание тестов для всех компонентов.

8. **Документация**:
   - Обновление README и добавление комментариев в код.

---

## **Как запустить**

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Настройте MQTT-брокеры и WebSocket в файле `config/settings.py`.

3. Запустите сервер:
   ```bash
   python -m agents.NeuralChat.server.websocket_server
   ```

4. Подключитесь к чату через клиент:
   ```bash
   python -m agents.NeuralChat.client.websocket_client
   ```


