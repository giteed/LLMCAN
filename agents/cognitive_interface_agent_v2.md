# Документация когнитивного интерфейсного агента

## Обзор
Когнитивный интерфейсный агент — это центральный скрипт, который управляет взаимодействием с пользователем, обрабатывает запросы и координирует функционал с использованием внешних модулей. В новой версии (v2) структура агента была разделена на несколько отдельных файлов для улучшения поддерживаемости и масштабируемости.

## Структура файлов
### Компоненты версии 2:
1. **`cognitive_interface_agent_v2.py`**
   - Основной управляющий скрипт когнитивного агента.
   - Обрабатывает ввод пользователя, интегрирует другие модули и предоставляет результаты.
   - Импортирует функционал из:
     - `data_management.py`
     - `external_interactions.py`
     - `cognitive_logic.py`

2. **`cognitive_logic.py`**
   - Содержит основную когнитивную логику агента.
   - Основные функции:
     - Предобработка запросов (`preprocess_query`).
     - Генерация системных инструкций (`generate_system_instruction`).
     - Обработка и форматирование результатов поиска (`process_search_results`).

3. **`data_management.py`**
   - Управляет сохранением и загрузкой данных, включая историю диалогов.
   - Основные функции:
     - Сохранение и загрузка истории диалогов (`save_dialog_history`, `load_dialog_history`).
     - Управление временными результатами (`save_temp_result`).
     - Определение языка (`detect_language`).

4. **`external_interactions.py`**
   - Отвечает за взаимодействие с внешними системами, такими как Tor и `ddgr`.
   - Основные функции:
     - Проверка и перезапуск Tor (`check_tor_connection`, `restart_tor_and_check_ddgr`).
     - Выполнение анонимных поисковых запросов (`query_ddgr`).

### Версия 1:
Изначально агент представлял собой монолитную структуру из одного файла `cognitive_interface_agent.py` и его вспомогательных функций в `cognitive_interface_agent_functions.py`.

## Примечания по миграции
- Новая модульная структура обеспечивает чёткое разделение функционала.
- Существующие скрипты остаются без изменений для обеспечения совместимости.
- Новая версия доступна под именем `cognitive_interface_agent_v2.py`.

## Преимущества новой структуры
- **Удобство поддержки**: Функции сгруппированы логически по отдельным файлам.
- **Масштабируемость**: Добавление нового функционала или интеграций становится проще.
- **Тестирование**: Тестировать модули можно независимо друг от друга.

## Использование
Чтобы использовать новую версию:
1. Убедитесь, что все зависимости установлены (согласно `requirements.txt`).
2. Запустите агента с помощью:
   ```bash
   python3 agents/cognitive_interface_agent_v2.py
